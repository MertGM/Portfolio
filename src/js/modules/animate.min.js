var i,body=document.querySelector('body'),optionsAnimation,optionIconsAnimation,spinnerBackground,colorBgPrimary,spinnerBackgroundAnimation,optionsCollapsed,autoScroll,buttonAnimation,buttonFillAnimation,optionsFill,color1,color2,optionsInnerButtonAnimation,optionsOuterButtonAnimation,theme,moonAnimation,sunAnimation,navColor,fontPrimary,navAnims,navLeftOffset,emailModalAnimation,aside,NavFlags,navState,optionsMenu=document.querySelector('.options-menu'),optionsMenuWrapper=document.querySelector('.options-menu-wrapper'),options=document.querySelector('.options'),optionIcons=document.getElementById('options-icons'),optionsInnerButton=document.getElementById('inner-circle'),optionsOuterButton=document.getElementById('outer-circle'),buttonScrollInner=document.getElementById('auto-inner'),buttonScrollOuter=document.getElementById('auto-outer'),moon=document.getElementById('moon'),moonShadow=document.getElementById('moon-shadow'),sun=document.getElementById('sun'),sunShadow=document.getElementById('sun-shadow'),nav=document.querySelector('.nav'),emailModal=document.getElementById('email-confirmation'),optionsMenuAnimation=optionsMenu.animate([{transform:'scale(0, 0)'}],{fill:'forwards',easing:'ease-in-out',duration:1200});optionsMenuAnimation.pause(),optionsAnimation=options.animate([{opacity:0}],{fill:'forwards',easing:'ease-in-out',duration:1e3}),optionsAnimation.pause(),optionIconsAnimation=optionIcons.animate([{opacity:0}],{fill:'forwards',easing:'ease-in-out',duration:1e3}),optionIconsAnimation.pause(),spinnerBackground=document.querySelector('.spinner-background'),colorBgPrimary=getComputedStyle(document.body).getPropertyValue('--bg-primary'),spinnerBackgroundAnimation=spinnerBackground.animate([{opacity:0}],{fill:'forwards',easing:'steps(2, end)',duration:1e3}),spinnerBackgroundAnimation.pause(),optionsCollapsed=localStorage.getItem('options'),optionsCollapsed==null&&(optionsCollapsed=!1),autoScroll=localStorage.getItem('auto scroll'),autoScroll==null&&(autoScroll='true',localStorage.setItem('auto scroll',autoScroll)),buttonAnimation=buttonScrollInner.animate([{transform:'translateX(-14px)'}],{fill:'forwards',easing:'ease-in-out',duration:600}),buttonAnimation.pause(),buttonFillAnimation=buttonScrollOuter.animate([{fill:'#0f5'},{fill:'#f25'}],{fill:'forwards',easing:'ease-in-out',duration:500}),buttonFillAnimation.pause();function InitButtonAnimation(){optionsFill=getComputedStyle(optionsInnerButton).getPropertyValue('--btn-primary'),document.querySelector('body').className=='light'?(color1='#f91',color2='#fb1'):(color1='#9af',color2='#aef'),optionsInnerButtonAnimation=optionsInnerButton.animate([{fill:optionsFill},{fill:color1},{fill:color2},{fill:optionsFill}],{duration:500}),optionsInnerButtonAnimation.pause(),optionsOuterButtonAnimation=optionsOuterButton.animate([{stroke:optionsFill},{stroke:color1},{stroke:color2},{stroke:optionsFill}],{duration:500}),optionsOuterButtonAnimation.pause()}theme=localStorage.getItem('theme'),theme==null&&(theme='moon'),moonAnimation=moon.animate([{transform:'scale(0,0)'}],{fill:'forwards',easing:'ease-in-out',duration:500}),moonAnimation.pause(),sunAnimation=sun.animate([{transform:'scale(0,0)'}],{fill:'forwards',easing:'ease-in-out',duration:500}),sunAnimation.pause(),navColor=getComputedStyle(nav).getPropertyValue('--li-hover'),fontPrimary=getComputedStyle(document.body).getPropertyValue('--font-primary'),navAnims=[],navLeftOffset=0;for(i=0;i<nav.children.length;i++)navAnims.push(nav.children[i].animate([{width:'0.1em'},{color:'rgba(255, 0, 100, 0)'},{width:'3em'},{color:fontPrimary}],{fill:'both',easing:'ease-in-out',duration:500})),navAnims[i].pause();function ThemeSwitch(){theme=='sun'?(theme='moon',sunAnimation.playbackRate=1,moonAnimation.playbackRate=-1,sunAnimation.play(),moonAnimation.play(),body.setAttribute('class',''),sunShadow.setAttribute('class','hidden'),moonShadow.setAttribute('class','visible')):(theme='sun',sunAnimation.playbackRate=-1,moonAnimation.playbackRate=1,moonAnimation.play(),sunAnimation.play(),body.setAttribute('class','light'),moonShadow.setAttribute('class','hidden'),sunShadow.setAttribute('class','visible')),InitButtonAnimation(),localStorage.setItem('theme',theme)}emailModalAnimation=emailModal.animate([{bottom:'50px'}],{fill:'forwards',easing:'ease-in-out',duration:500}),emailModalAnimation.pause();export function Options(e){optionsCollapsed=='true'?(optionsCollapsed='false',optionsMenuAnimation.playbackRate=-1,optionsAnimation.playbackRate=-1,optionIconsAnimation.playbackRate=-1):(optionsMenuAnimation.playbackRate=1,optionsAnimation.playbackRate=1,optionIconsAnimation.playbackRate=1,optionsCollapsed='true'),InitButtonAnimation(),optionsAnimation.play(),optionsMenuAnimation.play(),optionIconsAnimation.play(),e.currentTarget.id=='outer-circle'?optionsOuterButtonAnimation.play():optionsInnerButtonAnimation.play(),localStorage.setItem('options',optionsCollapsed)}function SetAutoScroll(){autoScroll=='true'?(buttonAnimation.playbackRate=1,buttonAnimation.play(),buttonFillAnimation.playbackRate=1,buttonFillAnimation.play(),autoScroll='false'):(buttonAnimation.playbackRate=-1,buttonAnimation.play(),buttonFillAnimation.playbackRate=-1,buttonFillAnimation.play(),autoScroll='true'),localStorage.setItem('auto scroll',autoScroll)}function Wait(e){return new Promise(function(t){return setTimeout(t,e)})}aside=document.querySelector('aside'),NavFlags={collapsed:0,animationQueued:1,animating:2,expanded:3},navState=0;function ResizeNav(r,i){var n,a=parseInt(getComputedStyle(aside).left.split('px')[0]),s=a,t=-1,o=.003;if(i>r){function e(c){i>r?(t==-1&&(t=c,requestAnimationFrame(e)),n=c-t,s-=o*n,aside.style.left=s+'px',i-=o*n,requestAnimationFrame(e)):navLeftOffset=a-s}requestAnimationFrame(e)}else if(navLeftOffset>0){function e(i){navLeftOffset>0?(t==-1&&(t=i,requestAnimationFrame(e)),n=i-t,s+=o*n,aside.style.left=s+'px',navLeftOffset-=o*n,requestAnimationFrame(e)):navLeftOffset<=0&&(aside.removeAttribute('style'),navState=NavFlags.collapsed)}requestAnimationFrame(e)}}function NavAnimation(t){if(t.target.tagName=='LI'&&t.type=='mouseover')if(navState==NavFlags.animationQueued)navState=NavFlags.expanded;else if(navState==NavFlags.collapsed){navState=NavFlags.expanded;for(var e=0;e<navAnims.length;e++)navAnims[e].playbackRate=1,navAnims[e].play();navAnims[navAnims.length-1].finished.then(function(){ResizeNav(document.body.clientWidth,nav.getBoundingClientRect().right)})}t.type=='mouseout'&&navState==NavFlags.expanded&&(navState=NavFlags.animationQueued,Wait(1e3).then(function(){if(navState==NavFlags.animationQueued){navState=NavFlags.animating;for(var e=0;e<navAnims.length;e++)navAnims[e].playbackRate=-1,navAnims[e].play();navAnims[navAnims.length-1].finished.then(function(){ResizeNav(0,0)})}}))}export function Animate(){InitButtonAnimation(),buttonScrollInner.addEventListener('mousedown',SetAutoScroll,!1),buttonScrollOuter.addEventListener('mousedown',SetAutoScroll,!1),optionsInnerButton.addEventListener('mousedown',Options,!1),optionsOuterButton.addEventListener('mousedown',Options,!1),moon.addEventListener('mousedown',ThemeSwitch,!1),sun.addEventListener('mousedown',ThemeSwitch,!1),nav.addEventListener('mouseover',NavAnimation,!1),nav.addEventListener('mouseout',NavAnimation,!1)}export function PreloadAnimations(){optionsCollapsed=='true'?(optionsMenuAnimation.playbackRate=20,optionsAnimation.playbackRate=20,optionsAnimation.play(),optionsMenuAnimation.play(),optionsMenuAnimation.finished.then(function(){spinnerBackgroundAnimation.play(),spinnerBackgroundAnimation.finished.then(function(){spinnerBackground.classList.add('hidden')})})):(spinnerBackgroundAnimation.play(),spinnerBackgroundAnimation.finished.then(function(){spinnerBackground.classList.add('hidden')})),theme=='sun'?(moonAnimation.playbackRate=20,moonAnimation.play(),body.setAttribute('class','light'),moonShadow.setAttribute('class','hidden'),sunShadow.setAttribute('class','visible')):theme=='moon'&&(sunAnimation.playbackRate=20,sunAnimation.play(),sunShadow.setAttribute('class','hidden'),moonShadow.setAttribute('class','visible')),autoScroll=='false'&&(buttonAnimation.playbackRate=20,buttonAnimation.play(),buttonFillAnimation.playbackRate=20,buttonFillAnimation.play())}export function ConfirmEmailAnimation(){return new Promise(function(e){emailModalAnimation.playState=='paused'&&(emailModalAnimation.playbackRate=1,emailModalAnimation.play(),emailModalAnimation.finished.then(function(){Wait(6e3).then(function(){emailModalAnimation.playbackRate=-1,emailModalAnimation.play(),emailModalAnimation.finished.then(function(){return emailModalAnimation.pause(),e()})})}))})}
