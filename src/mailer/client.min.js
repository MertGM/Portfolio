import{ConfirmEmailAnimation}from'../js/modules/animate.js';function ConfirmEmailToDefault(a,b){setTimeout(function(){a[0].innerText=b[0],a[1].innerText=b[1]},6e3)}function Message(c){var a,b;c.data[0]!="0"?ConfirmEmailAnimation():(a=document.querySelectorAll('.email-confirmation-text'),b=[a[0].innerText],b.push(a[1].innerText),a[0].innerText=c.data.slice(1),a[1].innerText="",ConfirmEmailAnimation(),ConfirmEmailToDefault(a,b))}function Connected(a){}function EmailSubmit(){var g=document.getElementById('form-name').value,d=document.getElementById('form-email').value,e=document.getElementById('form-subject').value,f=document.getElementById('form-message').value,a=document.querySelectorAll('.email-confirmation-text'),b=[a[0].innerText],c,h;b.push(a[1].innerText),c=Date.now()-startTime,ws.readyState!=3?c>3e4?(ws.send([g,d,e,f]),startTime=Date.now()):(h=Math.ceil((3e4-c)/1e3),a[0].innerText="Blimey, slow down!",a[1].innerText="Please wait "+h+" more seconds before sending your email.",ConfirmEmailAnimation(),ConfirmEmailToDefault(a,b)):(a[0].innerText="Oops, mail server is down.",a[1].innerText="Try again later or contact me manually via the email icon.",ConfirmEmailAnimation(),ConfirmEmailToDefault(a,b))}const ws=new WebSocket('ws://127.0.0.1:9999');ws.onmessage=Message,ws.onopen=Connected;var startTime=0;document.getElementById('submit').addEventListener('click',EmailSubmit,!1)
